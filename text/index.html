<!DOCTYPE html><html lang="fa" dir="rtl" data-bs-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HugeRTE - ویرایشگر غول‌پیکر متن</title>  <!-- استایل‌های Tabler -->  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@latest/dist/css/tabler.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css" />  <!-- jQuery -->  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  <!-- TinyMCE فارسی نسخه دقیق -->  <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6.8.6-46/tinymce.min.js" referrerpolicy="origin"></script>  <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/langs/fa.js" referrerpolicy="origin"></script>  <style>
    body { font-family: Vazirmatn, sans-serif; }
  </style></head>
<body>
  <div class="page">
    <div class="page-wrapper">
      <div class="container-xl py-4">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h3 class="card-title"><i class="ti ti-edit me-2"></i>ویرایشگر غول‌پیکر متن - HugeRTE</h3>
            <div>
              <button id="download-html" class="btn btn-success btn-sm me-2"><i class="ti ti-download"></i></button>
              <button id="clear-content" class="btn btn-danger btn-sm me-2"><i class="ti ti-trash"></i></button>
              <button id="theme-toggle" class="btn btn-primary btn-sm"><i class="ti ti-moon"></i></button>
            </div>
          </div>
          <div class="card-body">
            <textarea id="hugerte-editor"></textarea>
            <div class="mt-3 text-muted text-end">ذخیره خودکار در مرورگر - نسخه اولیه HugeRTE</div>
          </div>
        </div>
      </div>
    </div>
  </div>  <script>
    function initHugeRTE() {
      const theme = localStorage.getItem("hugerteTheme") || "dark";

      tinymce.init({
        selector: "#hugerte-editor",
        language: "fa",
        directionality: "rtl",
        height: 400,
        menubar: false,
        statusbar: false,
        skin: theme === "dark" ? "oxide-dark" : "oxide",
        content_css: theme === "dark" ? "dark" : "default",
        plugins: [
          "advlist autolink lists link image charmap preview anchor",
          "searchreplace visualblocks code fullscreen",
          "insertdatetime media table code help wordcount"
        ],
        toolbar: "undo redo | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist | removeformat | code",
        content_style: "body { font-family: Vazirmatn, sans-serif; font-size: 14px; direction: rtl; text-align: right; }",
        setup: function (editor) {
          editor.on("init", function () {
            const saved = localStorage.getItem("hugerteContent");
            if (saved) editor.setContent(saved);
          });

          editor.on("change keyup", function () {
            localStorage.setItem("hugerteContent", editor.getContent());
          });
        }
      });
    }

    $(document).ready(function () {
      const theme = localStorage.getItem("hugerteTheme") || "dark";
      $("html").attr("data-bs-theme", theme);
      $("#theme-toggle").html(theme === "dark" ? '<i class="ti ti-sun"></i>' : '<i class="ti ti-moon"></i>');

      initHugeRTE();

      $("#theme-toggle").click(function () {
        const current = $("html").attr("data-bs-theme");
        const next = current === "dark" ? "light" : "dark";
        $("html").attr("data-bs-theme", next);
        localStorage.setItem("hugerteTheme", next);
        $(this).html(next === "dark" ? '<i class="ti ti-sun"></i>' : '<i class="ti ti-moon"></i>');
        tinymce.remove("#hugerte-editor");
        setTimeout(initHugeRTE, 100);
      });

      $("#clear-content").click(function () {
        if (confirm("آیا مطمئنی که می‌خوای همه متن‌ها پاک بشن؟")) {
          localStorage.removeItem("hugerteContent");
          const editor = tinymce.get("hugerte-editor");
          if (editor) editor.setContent("");
        }
      });

      $("#download-html").click(function () {
        const content = tinymce.get("hugerte-editor").getContent();
        const blob = new Blob([content], { type: "text/html" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "hugerte-output.html";
        a.click();
        URL.revokeObjectURL(url);
      });
    });
  </script></body>
</html>
